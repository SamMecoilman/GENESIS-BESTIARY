# Phase 1: 縦切りコア仕様書

> 目標: 最小限の要素で「狩りの楽しさ」を体験できる状態

## 期間目安: 5-7日

---

## 1. 実装範囲

| 要素 | 内容 |
|------|------|
| プレイヤー | 移動、攻撃（大剣3段）、回避 |
| モンスター | 1体、基本AI |
| マップ | 1面（3エリア構成） |
| システム | 剥ぎ取り、クエスト進行 |
| UI | HP/スタミナ、クエスト情報 |
| アート | 仮モデル（キューブ等） |

---

## 2. プレイヤー仕様

### 2.1 移動

```
- WASD / 左スティック で8方向移動
- 移動速度: 5.0 m/s（仮）
- カメラ追従（三人称視点）
- 抜刀時は移動速度低下（×0.7）
```

### 2.2 ステートマシン

```csharp
public enum PlayerState
{
    Idle,       // 待機
    Move,       // 移動
    Attack,     // 攻撃
    Dodge,      // 回避
    Carve,      // 剥ぎ取り
    Stagger,    // のけぞり
    Dead        // 死亡
}
```

### 2.3 攻撃（大剣）

```
コンボ: 縦斬り → 横斬り → 斬り上げ

縦斬り:
- モーション値: 48
- 発生: 0.5秒
- 硬直: 0.8秒

横斬り:
- モーション値: 26
- 発生: 0.3秒
- 硬直: 0.5秒

斬り上げ:
- モーション値: 38
- 発生: 0.4秒
- 硬直: 0.7秒

※ Phase 1では溜め攻撃なし
```

### 2.4 回避

```
- ローリング回避
- 無敵フレーム: 0.2秒（6フレーム/30fps）
- 移動距離: 3.0m
- スタミナ消費: 25
- 抜刀中のみ実行可能
```

### 2.5 パラメータ

```
HP: 100
スタミナ: 100
スタミナ回復: 10/秒（静止時）
```

---

## 3. モンスター仕様

### 3.1 基本情報

```
名前: テストモンスター（仮）
HP: 1000
サイズ: 大型（5m程度）
```

### 3.2 ステートマシン

```csharp
public enum MonsterState
{
    Idle,       // 待機
    Roam,       // 徘徊
    Chase,      // 追跡
    Attack,     // 攻撃
    Flinch,     // 怯み
    Dead        // 死亡
}
```

### 3.3 行動パターン

```
Idle:
- プレイヤーが視界外: 3秒後Roamへ
- プレイヤーが視界内: Chaseへ

Roam:
- ランダムな地点へゆっくり移動
- プレイヤー発見でChaseへ

Chase:
- プレイヤーに向かって移動
- 攻撃範囲内でAttackへ

Attack:
- 攻撃選択（噛みつき/突進）
- 攻撃終了後Chaseへ

Flinch:
- 怯み値蓄積で発動
- 1秒間行動不能
```

### 3.4 攻撃

```
噛みつき:
- ダメージ: 20
- 範囲: 前方3m
- 発生: 0.5秒
- 硬直: 1.0秒

突進:
- ダメージ: 30
- 範囲: 前方直線5m
- 発生: 1.0秒
- 硬直: 1.5秒
```

---

## 4. マップ仕様

### 4.1 構成

```
エリア1（開始地点）:
- 平坦な草原
- サイズ: 50m × 50m
- モンスター初期位置

エリア2:
- 岩場
- サイズ: 40m × 40m
- 高低差あり

エリア3:
- 森
- サイズ: 45m × 45m
- 障害物（木）あり

エリア間移動:
- 境界に近づくとロード
- Phase 1ではシームレスでなくてOK
```

---

## 5. 剥ぎ取り仕様

```
発動条件:
- モンスター死亡後
- モンスターに近接
- 剥ぎ取りボタン長押し（1.5秒）

回数: 3回
アイテム: ランダム（素材A: 60%, 素材B: 30%, 素材C: 10%）

剥ぎ取り中:
- 移動不可
- 攻撃でキャンセル（ダメージ受ける）
```

---

## 6. クエスト仕様

### 6.1 基本

```
目標: モンスター1体討伐
制限時間: 50分
死亡回数上限: 3回
```

### 6.2 進行

```
1. クエスト開始（エリア1にスポーン）
2. モンスター発見
3. 戦闘
4. モンスター討伐
5. 剥ぎ取り（任意）
6. クエスト完了表示
7. 結果画面（報酬表示）
```

---

## 7. UI仕様

### 7.1 HUD

```
左上:
- HP バー（緑）
- スタミナ バー（黄）

右上:
- 残り時間
- 死亡回数（ハートアイコン×3）

中央下:
- ミニマップ（Phase 1では省略可）

画面中央:
- ダメージ数字（ポップアップ）
```

### 7.2 クエスト完了画面

```
- 「QUEST COMPLETE」表示
- クリアタイム
- 獲得素材リスト
- 「拠点に戻る」ボタン
```

---

## 8. 仮アセット

Phase 1では見た目より動作確認を優先。

| 対象 | 仮アセット |
|------|------------|
| プレイヤー | Capsule + Cube（武器） |
| モンスター | 大きめのCube |
| マップ | Plane + Cube（障害物） |
| UI | Unity標準UI |

---

## 9. 完了条件

以下がすべて動作すればPhase 1完了:

- [ ] プレイヤーが移動できる
- [ ] プレイヤーが攻撃できる（3段コンボ）
- [ ] プレイヤーが回避できる
- [ ] モンスターが徘徊する
- [ ] モンスターがプレイヤーを追跡する
- [ ] モンスターが攻撃する
- [ ] ダメージ計算が機能する
- [ ] モンスターが死亡する
- [ ] 剥ぎ取りができる
- [ ] クエスト完了が判定される
- [ ] 結果画面が表示される

---

## 10. 実装順序

### Day 1: プロジェクト基盤 + 移動
```
- Unityプロジェクト設定
- フォルダ構造作成
- プレイヤー移動
- カメラ追従
```
**🎮 テストプレイ①: 移動確認**
- [ ] WASDで8方向移動できる
- [ ] カメラがプレイヤーを追従する
- [ ] 移動速度が適切（速すぎ/遅すぎでない）

---

### Day 2: プレイヤー戦闘アクション
```
- プレイヤーステートマシン
- プレイヤー攻撃（コンボ）
- プレイヤー回避
```
**🎮 テストプレイ②: 操作感確認**
- [ ] 攻撃ボタンで3段コンボが出る
- [ ] 各攻撃の重みを感じる（硬直）
- [ ] 回避でローリングする
- [ ] 回避中に無敵を感じる（後でモンスター追加時に確認）
- [ ] スタミナが減る/回復する

---

### Day 3: モンスター基本
```
- モンスター基本（仮モデル配置）
- モンスターステートマシン
- モンスターAI（徘徊、追跡）
```
**🎮 テストプレイ③: モンスター挙動確認**
- [ ] モンスターが徘徊している
- [ ] プレイヤーに近づくと追跡してくる
- [ ] 追跡の速度が適切（逃げられる程度）

---

### Day 4: 戦闘システム
```
- モンスター攻撃
- ダメージシステム（与/被）
- 怯み処理
- プレイヤー被弾/死亡
```
**🎮 テストプレイ④: 戦闘確認 ⭐重要**
- [ ] モンスターが攻撃してくる
- [ ] プレイヤーの攻撃でダメージが入る
- [ ] ダメージ数字が表示される
- [ ] 怯みが発生する
- [ ] プレイヤーが被弾でのけぞる
- [ ] 回避で攻撃を避けられる
- [ ] モンスターを倒せる（HP0で死亡）
- [ ] **「狩りの手応え」を感じるか？**

---

### Day 5: ゲームループ完成
```
- 剥ぎ取り
- クエスト進行（開始/完了判定）
- 結果画面
- 仮UI（HP/スタミナ/時間）
```
**🎮 テストプレイ⑤: 一連の流れ確認**
- [ ] クエスト開始できる
- [ ] モンスターを討伐できる
- [ ] 剥ぎ取りができる（3回）
- [ ] クエスト完了が表示される
- [ ] 結果画面で素材が見える
- [ ] **最初から最後まで通してプレイできる**

---

### Day 6-7: 調整 + 最終テスト
```
- バグ修正
- パラメータ調整
- 全体テストプレイ
```
**🎮 テストプレイ⑥: 品質確認**
- [ ] 3回連続でクエストクリアできる（安定性）
- [ ] 致命的なバグがない
- [ ] **「もう1回やりたい」と思えるか？**

---

### テストプレイ記録テンプレート

各テストプレイ後、以下をWORKLOG.mdに記録:

```markdown
### テストプレイ① 結果 (YYYY-MM-DD HH:MM)
- 合格項目: 
- 不合格項目: 
- 気になった点: 
- 調整が必要: 
```
